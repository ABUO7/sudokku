package sudoku // файл принадлежит пакету sudoku

// IsValidMove — проверяет, можно ли вставить число val в клетку [row][col] по правилам Sudoku
func IsValidMove(board [][]int, row, col, val int) bool {
	// Проверка по строке:
	for i := 0; i < 9; i++ { // внешний цикл: итерируемся по всем колонкам текущей строки
		if board[row][i] == val { // если в этой строке уже есть такое число
			return false // недопустимо вставлять его снова — нарушается правило уникальности
		}
	}

	// Проверка по столбцу:
	for i := 0; i < 9; i++ { // внешний цикл: итерируемся по всем строкам текущего столбца
		if board[i][col] == val { // если в этом столбце уже есть такое число
			return false // нарушается правило — число уже есть в столбце
		}
	}

	// Проверка по 3x3 квадрату:
	startRow := (row / 3) * 3 // определяем верхнюю границу квадрата: 0, 3 или 6
	startCol := (col / 3) * 3 // определяем левую границу квадрата: 0, 3 или 6

	for i := 0; i < 3; i++ { // внешний цикл: 3 строки квадрата
		for j := 0; j < 3; j++ { // внутренний цикл: 3 колонки квадрата
			if board[startRow+i][startCol+j] == val { // если значение уже присутствует в квадрате
				return false // нарушается правило: в квадрате 3x3 все числа должны быть уникальны
			}
		}
	}

	// Если не нарушено ни одно из трёх правил — ход допустим
	return true
}
